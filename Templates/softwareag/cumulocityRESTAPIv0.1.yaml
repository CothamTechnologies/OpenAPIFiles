swagger: '2.0'
info:
  version: '0.1'
  title: Cumulocity REST API
  description: Cumulocity REST API for FloPro Integration

host: cotham.eu-latest.cumulocity.com


schemes:
  - https

securityDefinitions:
  auth:
    type: basic
security:
  - auth: []

paths:
  /alarm:
    get:
      description: >-
        #### For a detailed description of the API please check out the [Alarm
        Reference Guide](http://cumulocity.com/guides/reference/alarms/)
      summary: Get the AlarmAPI resource
      tags:
        - Alarms
      produces:
        - application/json
      parameters: []
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/AlarmAPI'
        default:
          description: Other Error
          schema:
            $ref: '#/definitions/GenericError'
  /alarm/alarms:        
    get:
      description: >-
        #### For a detailed description of the API please check out the [Alarm
        Reference Guide](http://cumulocity.com/guides/reference/alarms/)
      summary: Get an alarm collection
      tags:
        - Alarms
      produces:
        - application/json
      parameters:
        - in: query
          name: pageSize
          description: Default 5, Max 2000
          type: integer
        - in: query
          name: currentPage
          type: integer
        - in: query
          name: withTotalPages
          type: boolean
        - in: query
          name: dateFrom
          description: example formats 2019-04-20 or 2019-04-20T08:30:00.000Z
          type: string
        - in: query
          name: dateTo
          description: example formats 2019-04-20 or 2019-04-20T08:30:00.000Z
          type: string
        - in: query
          name: status
          description: status={status}
          type: string
        - in: query
          name: resolved
          description: resolved={resolved}
          type: string
        - in: query
          name: severity
          description: severity={severity}
          type: string
        - in: query
          name: source
          description: source={source}
          type: string
        - in: query
          name: withAssets
          description: withAssets={withAssets}
          type: string
        - in: query
          name: withDevices
          description: withDevices={withDevices}
          type: string
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/AlarmCollection'
        default:
          description: Other Error
          schema:
            $ref: '#/definitions/GenericError'
    post:
      description: >-
        #### For a detailed description of the API please check out our [Alarm
        Reference Guide](http://cumulocity.com/guides/reference/alarms/)
      summary: Create a new Alarm
      tags:
        - Alarms
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: Alarm
          in: body
          required: true
          description: The Alarm to create
          schema:
            type: object
            required:
              - type
              - time
              - text
              - source
              - severity
            properties:
              type:
                type: string
              time:
                type: string
              text:
                type: string
              source:
                type: object
                properties:
                  id:
                    type: integer
                  self:
                    type: string
              status:
                type: string
              severity:
                type: string
      responses:
        200:
          description: Success
          schema:
            $ref: '#/definitions/Alarm'
        default:
          description: Other Error
          schema:
            $ref: '#/definitions/GenericError'
  /measurement/measurements:        
    get:
      description: Get Measurement Collection
      summary: https://cumulocity.com/guides/reference/measurements/#measurement-collection
      tags:
        - Measurement
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: header
          name: X-Cumulocity-System-Of-Units
          description: possible values imperial or metric
          type: string
        - in: query
          name: pageSize
          description: Default 5, Max 2000
          type: integer
        - in: query
          name: currentPage
          type: integer
        - in: query
          name: withTotalPages
          type: boolean
        - in: query
          name: dateFrom
          description: example formats 2019-04-20 or 2019-04-20T08:30:00.000Z
          type: string
        - in: query
          name: dateTo
          description: example formats 2019-04-20 or 2019-04-20T08:30:00.000Z
          type: string
        - in: query
          name: valueFragmentType
          description: valueFragmentType={valueFragmentType}
          type: string
        - in: query
          name: valueFragmentSeries
          description: valueFragmentSeries={valueFragmentSeries}
          type: string
        - in: query
          name: type
          description: type={type}
          type: string
        - in: query
          name: source
          description: source={source}
          type: string
              

      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              next: 
                type: string
              self:
                type: integer
              statistics:
                type: object
                properties:
                  totalPages:
                    type: integer
                  currentPage:
                    type: integer
                  pageSize:
                    type: integer
              measurements:
                type: array
                items:
                  type: object
                  properties:
                    self:
                      type: integer
                    id:
                      type: string
                    time:
                      type: string
                    type:
                      type: string
                    source:
                      type: object
                      properties:
                        self:
                          type: integer
                        id:
                          type: string
                    ct_CustomSensor_sim:
                      type: object
                      properties:
                        ct_CustomSeries_1:
                          type: object
                          properties:
                            value:
                              type: string
                            unit:
                              type: string
                        ct_CustomSeries_2:
                          type: object
                          properties:
                            value:
                              type: string
                            unit:
                              type: string
                        ct_CustomSeries_3:
                          type: object
                          properties:
                            value:
                              type: string
                            unit:
                              type: string
                        ct_CustomSeries_4:
                          type: object
                          properties:
                            value:
                              type: string
                            unit:
                              type: string
                    c8y_SignalStrength:
                      type: object
                      properties:
                        rssi:
                          type: object
                          properties:
                            value:
                              type: string
                            unit:
                              type: string
                        ber:
                          type: object
                          properties:
                            value:
                              type: string
                            unit:
                              type: string
                    c8y_TemperatureMeasurement:
                      type: object
                      properties:
                        T:
                          type: object
                          properties:
                            value:
                              type: string
                            unit:
                              type: string
                    cTh_AccelerationMeasurement:
                      type: object
                      properties:
                        X:
                          type: object
                          properties:
                            value:
                              type: string
                            unit:
                              type: string
                        Y:
                          type: object
                          properties:
                            value:
                              type: string
                            unit:
                              type: string
                        Z:
                          type: object
                          properties:
                            value:
                              type: string
                            unit:
                              type: string

        default:
          description: Other Error
          schema:
            type: object
            properties:
              error:
                type: string
              info:
                type: string
              message:
                type: string  
  
  /inventory/managedObjects/{deviceId}:
    get:
      description: Get a managedObject
      summary: https://cumulocity.com/guides/reference/inventory/#managed-object
      tags:
        - Inventory
      produces:
        - application/json
      parameters:
        - name: deviceId
          in: path
          required: true
          type: string
          description: device id
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              owner: 
                type: string
              creationTime: 
                type: string
              lastUpdated: 
                type: string
              type: 
                type: string
              name: 
                type: string
              id: 
                type: string
              c8y_Hardware:
                type: object
                properties:
                  model:
                    type: string
                  serialNumber:
                    type: string 
              c8y_Mobile:
                type: object
                properties:
                  imei:
                    type: string
                  cellId:
                    type: string 
                  iccid:
                    type: string 
              c8y_Firmware:
                type: object
                properties:
                  version:
                    type: string
              c8y_Position:
                type: object
                properties:
                  alt:
                    type: string
                  lng:
                    type: string 
                  lat:
                    type: string
        404: 
          description: Not Found Device
          schema:
            type: object
            properties:
              error:
                type: string
              info:
                type: string
              message:
                type: string

        default:
          description: Other Error
          schema:
            type: object
            properties:
              error:
                type: string
              info:
                type: string
              message:
                type: string

  /inventory/managedObjects/{deviceId}/{referenceType}:
    get:
      description: Get Managed Object Reference Collection
      summary: https://cumulocity.com/guides/reference/inventory/#managed-object-reference-collection
      tags:
        - Inventory
      produces:
        - application/json
      parameters:
        - name: referenceType
          in: path
          required: true
          type: string
          description: reference type childDevices or childAssets
        - name: deviceId
          in: path
          required: true
          type: string
          description: device ID of parent
        - in: query
          name: pageSize
          description: Default 5, Max 2000
          type: integer
        - in: query
          name: currentPage
          type: integer
        - in: query
          name: withTotalPages
          type: boolean
        - in: query
          name: dateFrom
          description: example formats 2019-04-20 or 2019-04-20T08:30:00.000Z
          type: string
        - in: query
          name: dateTo
          description: example formats 2019-04-20 or 2019-04-20T08:30:00.000Z
          type: string
        - in: query
          name: query
          description: 'query language eg only query to database: …?query=name eq ‘M01’
                        keyword $filter=: …?query=$filter=name eq ‘M01’
                        keyword $orderby=: …?query=$orderby=id asc
                        keywords $filter= and $orderby=: …?query=$filter=name eq ‘M01’ $orderby=id'
          type: string
        - in: query
          name: fragmentType
          description: fragmentType={fragmentType}
          type: string
        - in: query
          name: type
          description: type={type}
          type: string
        - in: query
          name: ids
          description: ids={ids}
          type: string

      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              next: 
                type: string
              self:
                type: integer
              statistics:
                type: object
                properties:
                  totalPages:
                    type: integer
                  currentPage:
                    type: integer
                  pageSize:
                    type: integer
              references:
                type: array
                items:
                  type: object
                  properties:
                    managedObject:
                      type: object
                      properties:
                        owner: 
                          type: string
                        creationTime: 
                          type: string
                        lastUpdated: 
                          type: string
                        type: 
                          type: string
                        name: 
                          type: string
                        id: 
                          type: string
                        c8y_ActiveAlarmStatus:
                          type: object
                          properties:
                            major:
                              type: string
                        c8y_Availability:
                          type: object
                          properties:
                            lastMessage:
                              type: string
                            status:
                              type: string
                        c8y_Connection:
                          type: object
                          properties:
                            status:
                              type: string
                        c8y_Hardware:
                          type: object
                          properties:
                            model:
                              type: string
                            serialNumber:
                              type: string 
                        c8y_Mobile:
                          type: object
                          properties:
                            imei:
                              type: string
                            cellId:
                              type: string 
                            iccid:
                              type: string 
                        c8y_Firmware:
                          type: object
                          properties:
                            version:
                              type: string
                        c8y_Position:
                          type: object
                          properties:
                            alt:
                              type: string
                            lng:
                              type: string 
                            lat:
                              type: string

        default:
          description: Other Error
          schema:
            type: object
            properties:
              error:
                type: string
              info:
                type: string
              message:
                type: string

  /inventory/managedObjects:
    get:
      description: Get Managed Object Collection
      summary: https://cumulocity.com/guides/reference/inventory/#managed-object-collection
      tags:
        - Inventory
      produces:
        - application/json
      parameters:
        - in: query
          name: pageSize
          description: Default 5, Max 2000
          type: integer
        - in: query
          name: currentPage
          type: integer
        - in: query
          name: withTotalPages
          type: boolean
        - in: query
          name: dateFrom
          description: example formats 2019-04-20 or 2019-04-20T08:30:00.000Z
          type: string
        - in: query
          name: dateTo
          description: example formats 2019-04-20 or 2019-04-20T08:30:00.000Z
          type: string
        - in: query
          name: query
          description: 'query language eg only query to database: …?query=name eq ‘M01’
                        keyword $filter=: …?query=$filter=name eq ‘M01’
                        keyword $orderby=: …?query=$orderby=id asc
                        keywords $filter= and $orderby=: …?query=$filter=name eq ‘M01’ $orderby=id'
          type: string
        - in: query
          name: fragmentType
          description: fragmentType={fragmentType}
          type: string
        - in: query
          name: type
          description: type={type}
          type: string
        - in: query
          name: ids
          description: ids={ids}
          type: string

      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              next: 
                type: string
              self:
                type: integer
              statistics:
                type: object
                properties:
                  totalPages:
                    type: integer
                  currentPage:
                    type: integer
                  pageSize:
                    type: integer
              managedObjects:
                type: array
                items:
                  type: object
                  properties:  
                    additionParents:
                      type: object
                      properties:
                        self:
                          type: string
                        references:
                          type: array
                          items:
                            type: object
                            properties:
                              managedObject:
                                type: object
                                properties:
                                  name: 
                                    type: string
                                  id: 
                                    type: string
                                  self:
                                    type: string
                    assetParents:
                      type: object
                      properties:
                        self:
                          type: string
                        references:
                          type: array
                          items:
                            type: object
                            properties:
                              managedObject:
                                type: object
                                properties:
                                  name: 
                                    type: string
                                  id: 
                                    type: string
                                  self:
                                    type: string
                    childAdditions:
                      type: object
                      properties:
                        self:
                          type: string
                        references:
                          type: array
                          items:
                            type: object
                            properties:
                              managedObject:
                                type: object
                                properties:
                                  name: 
                                    type: string
                                  id: 
                                    type: string
                                  self:
                                    type: string
                    childAssets:
                      type: object
                      properties:
                        self:
                          type: string
                        references:
                          type: array
                          items:
                            type: object
                            properties:
                              managedObject:
                                type: object
                                properties:
                                  name: 
                                    type: string
                                  id: 
                                    type: string
                                  self:
                                    type: string
                    childDevices:
                      type: object
                      properties:
                        self:
                          type: string
                        references:
                          type: array
                          items:
                            type: object
                            properties:
                              managedObject:
                                type: object
                                properties:
                                  name: 
                                    type: string
                                  id: 
                                    type: string
                                  self:
                                    type: string
                    deviceParents:
                      type: object
                      properties:
                        self:
                          type: string
                        references:
                          type: array
                          items:
                            type: object
                            properties:
                              managedObject:
                                type: object
                                properties:
                                  name: 
                                    type: string
                                  id: 
                                    type: string
                                  self:
                                    type: string
                    owner: 
                      type: string
                    creationTime: 
                      type: string
                    lastUpdated: 
                      type: string
                    type: 
                      type: string
                    name: 
                      type: string
                    id: 
                      type: string
                    c8y_IsDeviceGroup:
                      type: string
                    c8y_Global:
                      type: string
                    c8y_Hardware:
                      type: object
                      properties:
                        model:
                          type: string
                        serialNumber:
                          type: string 
                    c8y_Mobile:
                      type: object
                      properties:
                        imei:
                          type: string
                        cellId:
                          type: string 
                        iccid:
                          type: string 
                    c8y_Firmware:
                      type: object
                      properties:
                        version:
                          type: string
                    c8y_Position:
                      type: object
                      properties:
                        alt:
                          type: string
                        lng:
                          type: string 
                        lat:
                          type: string

        default:
          description: Other Error
          schema:
            $ref: '#/definitions/GenericError'
definitions:
  GenericError:
    type: object
    properties:
      error:
        type: string
      info:
        type: string
      message:
        type: string
  PagingStatistics:
    type: object
    properties:
      totalPages:
        type: integer
      currentPage:
        type: integer
      pageSize:
          type: integer
  ManagedObject:
    type: object
    properties:
      self:
        type: string
      id:
        type: integer
  AlarmAPI:
    type: object
    properties:
      self:
        type: string
      alarms:
        type: string
      alarmsForStatus:
        type: string
      alarmsForSource:
        type: string
      alarmsForSourceAndStatus:
        type: string
      alarmsForTime:
        type: string
      alarmsForStatusAndTime:
        type: string
      alarmsForSourceAndTime:
        type: string
      alarmsForSourceAndStatusAndTime:
        type: string
      alarmsForSourceWithAssetsAndWithDevices:
        type: string
      alarmsForSeverity:
        type: string
      alarmsForResolved:
        type: string
  Alarm:
    type: object
    properties:
      self:
        type: integer
      id:
        type: string                   
      time:
        type: string
      type:
        type: string
      creationTime:
        type: integer
      text:
        type: string                   
      status:
        type: string
      severity:
        type: string
      count:
        type: integer
      firstOccurrenceTime:
        type: string
      source:
        $ref: '#/definitions/ManagedObject'
  AlarmCollection:
    type: object
    properties:
      next: 
        type: string
      prev: 
        type: string
      self:
        type: integer
      statistics:
        $ref: '#/definitions/PagingStatistics'
      alarms:
        type: array
        items:
          $ref: '#/definitions/Alarm'